<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang=""><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Transactional.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">mybatis-guice</a> &gt; <a href="index.source.html" class="el_package">org.mybatis.guice.transactional</a> &gt; <span class="el_source">Transactional.java</span></div><h1>Transactional.java</h1><pre class="source lang-java linenums">/*
 *    Copyright 2009-2023 the original author or authors.
 *
 *    Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 *    you may not use this file except in compliance with the License.
 *    You may obtain a copy of the License at
 *
 *       https://www.apache.org/licenses/LICENSE-2.0
 *
 *    Unless required by applicable law or agreed to in writing, software
 *    distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *    See the License for the specific language governing permissions and
 *    limitations under the License.
 */
package org.mybatis.guice.transactional;

import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

import org.apache.ibatis.session.ExecutorType;
import org.apache.ibatis.session.TransactionIsolationLevel;

/**
 * Any method marked with this annotation will be considered for transactionality.
 */
@Retention(RetentionPolicy.RUNTIME)
@Target({ ElementType.METHOD, ElementType.TYPE })
public @interface Transactional {

  /**
   * Returns the constant indicating the myBatis executor type.
   *
   * @return the constant indicating the myBatis executor type.
   */
  ExecutorType executorType() default ExecutorType.SIMPLE;

  /**
   * Returns the constant indicating the transaction isolation level.
   *
   * @return the constant indicating the transaction isolation level.
   */
  Isolation isolation() default Isolation.DEFAULT;

  /**
   * Returns the constant indicating the transaction isolation level.
   *
   * @return the constant indicating the transaction isolation level.
   *
   * @deprecated use {@link #isolation()} instead, setting this property has no effect.
   */
  @Deprecated
  TransactionIsolationLevel isolationLevel() default TransactionIsolationLevel.NONE;

  /**
   * Flag to indicate that myBatis has to force the transaction {@code commit().}
   *
   * @return false by default, user defined otherwise.
   */
  boolean force() default false;

  /**
   * Flag to indicate the auto commit policy.
   *
   * @return false by default, user defined otherwise.
   *
   * @deprecated Users that intend auto commit can achieve it by simply not using {@literal @Transactional}
   */
  @Deprecated
  boolean autoCommit() default false;

  /**
   * The exception re-thrown when an error occurs during the transaction.
   *
   * @return the exception re-thrown when an error occurs during the transaction.
   */
  Class&lt;? extends Throwable&gt; rethrowExceptionsAs() default Exception.class;

  /**
   * A custom error message when throwing the custom exception.
   * &lt;p&gt;
   * It supports java.util.Formatter place holders, intercepted method arguments will be used as message format
   * arguments.
   *
   * @return a custom error message when throwing the custom exception.
   *
   * @see java.util.Formatter#format(String, Object...)
   */
  String exceptionMessage() default &quot;&quot;;

  /**
   * If true, the transaction will never committed but rather rolled back, useful for testing purposes.
   * &lt;p&gt;
   * This parameter is false by default.
   *
   * @return if true, the transaction will never committed but rather rolled back, useful for testing purposes.
   */
  boolean rollbackOnly() default false;

  //
  // from jakarta.transaction.Transactional
  //

  /**
   * The TxType element of the Transactional annotation indicates whether a bean method is to be executed within a
   * transaction context.
   *
   * @return the tx type
   */
  TxType value() default TxType.REQUIRED;

  /**
   * The TxType element of the annotation indicates whether a bean method is to be executed within a transaction context
   * where the values provide the following corresponding behavior.
   */
<span class="fc" id="L118">  public enum TxType {</span>
    /**
     * &lt;p&gt;
     * If called outside a transaction context, the interceptor must begin a new JTA transaction, the managed bean
     * method execution must then continue inside this transaction context, and the transaction must be completed by the
     * interceptor.
     * &lt;/p&gt;
     * &lt;p&gt;
     * If called inside a transaction context, the managed bean method execution must then continue inside this
     * transaction context.
     * &lt;/p&gt;
     */
<span class="fc" id="L130">    REQUIRED,</span>

    /**
     * &lt;p&gt;
     * If called outside a transaction context, the interceptor must begin a new JTA transaction, the managed bean
     * method execution must then continue inside this transaction context, and the transaction must be completed by the
     * interceptor.
     * &lt;/p&gt;
     * &lt;p&gt;
     * If called inside a transaction context, the current transaction context must be suspended, a new JTA transaction
     * will begin, the managed bean method execution must then continue inside this transaction context, the transaction
     * must be completed, and the previously suspended transaction must be resumed.
     * &lt;/p&gt;
     */
<span class="fc" id="L144">    REQUIRES_NEW,</span>

    /**
     * &lt;p&gt;
     * If called outside a transaction context, a TransactionalException with a nested TransactionRequiredException must
     * be thrown.
     * &lt;/p&gt;
     * &lt;p&gt;
     * If called inside a transaction context, managed bean method execution will then continue under that context.
     * &lt;/p&gt;
     */
<span class="fc" id="L155">    MANDATORY,</span>

    /**
     * &lt;p&gt;
     * If called outside a transaction context, managed bean method execution must then continue outside a transaction
     * context.
     * &lt;/p&gt;
     * &lt;p&gt;
     * If called inside a transaction context, the managed bean method execution must then continue inside this
     * transaction context.
     * &lt;/p&gt;
     */
<span class="fc" id="L167">    SUPPORTS,</span>

    /**
     * &lt;p&gt;
     * If called outside a transaction context, managed bean method execution must then continue outside a transaction
     * context.
     * &lt;/p&gt;
     * &lt;p&gt;
     * If called inside a transaction context, the current transaction context must be suspended, the managed bean
     * method execution must then continue outside a transaction context, and the previously suspended transaction must
     * be resumed by the interceptor that suspended it after the method execution has completed.
     * &lt;/p&gt;
     */
<span class="fc" id="L180">    NOT_SUPPORTED,</span>

    /**
     * &lt;p&gt;
     * If called outside a transaction context, managed bean method execution must then continue outside a transaction
     * context.
     * &lt;/p&gt;
     * &lt;p&gt;
     * If called inside a transaction context, a TransactionalException with a nested InvalidTransactionException must
     * be thrown.
     * &lt;/p&gt;
     */
<span class="fc" id="L192">    NEVER</span>
  }

  /**
   * The rollbackOn element can be set to indicate exceptions that must cause the interceptor to mark the transaction
   * for rollback. Conversely, the dontRollbackOn element can be set to indicate exceptions that must not cause the
   * interceptor to mark the transaction for rollback. When a class is specified for either of these elements, the
   * designated behavior applies to subclasses of that class as well. If both elements are specified, dontRollbackOn
   * takes precedence.
   *
   * @return Class[] of Exceptions
   */
  // @Nonbinding
  // public Class[] rollbackOn() default {};

  /**
   * The dontRollbackOn element can be set to indicate exceptions that must not cause the interceptor to mark the
   * transaction for rollback. Conversely, the rollbackOn element can be set to indicate exceptions that must cause the
   * interceptor to mark the transaction for rollback. When a class is specified for either of these elements, the
   * designated behavior applies to subclasses of that class as well. If both elements are specified, dontRollbackOn
   * takes precedence.
   *
   * @return Class[] of Exceptions
   */
  // @Nonbinding
  // public Class[] dontRollbackOn() default {};

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>